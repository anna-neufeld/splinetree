<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Build a splinetree model. — splineTree • splinetree</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Build a splinetree model. — splineTree" />

<meta property="og:description" content="Builds a regression tree for longitudinal or functional data using the spline projection method. The underlying tree building process uses the rpart package,
and the resulting spline tree is an rpart object with additional stored information. The parameters df, knots, degree, intercept allow for flexibility
in customizing the spline basis used for projection. The parameters nGrid and gridPoints allow for flexibility in the grid on which the
projection sum of squares is evaluated. The parameters minNodeSize and cp allow for flexibility in controlling the size of the final tree." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">splinetree</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Forest-Intro.html">Forest Building with splinetree</a>
    </li>
    <li>
      <a href="../articles/Long-Intro.html">Introduction to splinetree</a>
    </li>
    <li>
      <a href="../articles/Tree-Intro.html">Tree Building with splinetree</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/anna-neufeld/splinetree">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Build a splinetree model.</h1>
    <small class="dont-index">Source: <a href='https://github.com/anna-neufeld/splinetree/blob/master/R/splineTree.R'><code>R/splineTree.R</code></a></small>
    <div class="hidden name"><code>splineTree.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Builds a regression tree for longitudinal or functional data using the spline projection method. The underlying tree building process uses the rpart package,
and the resulting spline tree is an rpart object with additional stored information. The parameters df, knots, degree, intercept allow for flexibility
in customizing the spline basis used for projection. The parameters nGrid and gridPoints allow for flexibility in the grid on which the
projection sum of squares is evaluated. The parameters minNodeSize and cp allow for flexibility in controlling the size of the final tree.</p>
    
    </div>

    <pre class="usage"><span class='fu'>splineTree</span>(<span class='no'>splitFormula</span>, <span class='no'>tformula</span>, <span class='no'>idvar</span>, <span class='no'>data</span>, <span class='kw'>knots</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>df</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>degree</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>intercept</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>nGrid</span> <span class='kw'>=</span> <span class='fl'>7</span>,
  <span class='kw'>gridPoints</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>minNodeSize</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>cp</span> <span class='kw'>=</span> <span class='fl'>0.01</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>splitFormula</th>
      <td><p>Formula specifying the longitudinal response variable and the time-constant variables that will be used for splitting in the tree.</p></td>
    </tr>
    <tr>
      <th>tformula</th>
      <td><p>Formula specifying the longitudinal response variable and the variable that acts as the time variable.</p></td>
    </tr>
    <tr>
      <th>idvar</th>
      <td><p>The name of the variable that serves as the ID variable for grouping observations. Must be a string.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>dataframe in long format that contains all variables specified in the formulas.</p></td>
    </tr>
    <tr>
      <th>knots</th>
      <td><p>Specified locations for internal knots in the spline basis. Defaults to NULL, which corresponds to no internal knots.</p></td>
    </tr>
    <tr>
      <th>df</th>
      <td><p>Degrees of freedom of the spline basis. If this is specified but the knots parameter is NULL, then the appropriate number of internal knots
will be added at quantiles of the training data. If both df and knots are unspecified, the spline basis will have no internal knots. If knots is specified,
this parameter will be ignored.</p></td>
    </tr>
    <tr>
      <th>degree</th>
      <td><p>Specifies degree of spline basis used for projection.</p></td>
    </tr>
    <tr>
      <th>intercept</th>
      <td><p>Specifies whether or not the set of basis functions will include the intercept function.
Defaults to FALSE, which means that the tree will split based on trajectory shape, ignoring response level.</p></td>
    </tr>
    <tr>
      <th>nGrid</th>
      <td><p>Number of grid points to evaluate projection sum of squares at. If gridPoints
is not supplied, this argument will be used and the appropriate number of grid points will be placed at
equally spaced quantiles of the time variable. The default is 7.</p></td>
    </tr>
    <tr>
      <th>gridPoints</th>
      <td><p>Optional. A vector of numbers that will be used as the grid on which to evaluate the
projection sum of squares. Should fall roughly within the range of the time variable.</p></td>
    </tr>
    <tr>
      <th>minNodeSize</th>
      <td><p>Minimum number of observational units that can be in a terminal node. Controls tree size
and helps avoid overfitting. Defaults to 10.</p></td>
    </tr>
    <tr>
      <th>cp</th>
      <td><p>Complexity parameter passed to the rpart building process. Controls tree size. Defaults to
the rpart default of 0.01.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An rpart object with additional splinetree-specific information stored in model$parms. The important
attributes of the rpart object include model$frame, model$where, and model$cptable. model$frame holds information
about each node in the tree. The ith entry in model$where tells us which row of model$frame describes the node that
the ith individual in the flattened dataset falls into. model$parms$flat_data holds the flattened dataset that
was used to build the tree. model$cptable displays the complexity parameters that would be needed to prune the tree
to various desired sizes. Apart from holding the flattened dataset, model$parms holds the boundary knots and the internal
knots of the spline basis used to build the tree. These are sometimes important to recover later.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>nlsySample_subset</span> <span class='kw'>&lt;-</span> <span class='no'>nlsySample</span>[<span class='no'>nlsySample</span>$<span class='no'>ID</span> <span class='kw'>%in%</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sample'>sample</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/unique'>unique</a></span>(<span class='no'>nlsySample</span>$<span class='no'>ID</span>), <span class='fl'>500</span>),]
<span class='no'>splitForm</span> <span class='kw'>&lt;-</span> ~<span class='no'>HISP</span>+<span class='no'>WHITE</span>+<span class='no'>BLACK</span>+<span class='no'>HGC_MOTHER</span>+<span class='no'>HGC_FATHER</span>+<span class='no'>SEX</span>+<span class='no'>Num_sibs</span>
<span class='no'>tree1</span> <span class='kw'>&lt;-</span> <span class='fu'>splineTree</span>(<span class='no'>splitForm</span>, <span class='no'>BMI</span>~<span class='no'>AGE</span>, <span class='st'>'ID'</span>, <span class='no'>nlsySample_subset</span>, <span class='kw'>degree</span><span class='kw'>=</span><span class='fl'>3</span>, <span class='kw'>intercept</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>cp</span><span class='kw'>=</span><span class='fl'>0.005</span>)
<span class='fu'><a href='stPrint.html'>stPrint</a></span>(<span class='no'>tree1</span>)</div><div class='output co'>#&gt; n= 500,  
#&gt; 
#&gt; node), split, n , coefficients 
#&gt;       * denotes terminal node
#&gt; 
#&gt;  1) root, 500,  (21.46013,  4.0552900, 7.153639,  7.341742) 
#&gt;    2) WHITE&lt; 0.5, 242,  (21.03874,  5.6282150, 8.895810,  8.144596) 
#&gt;      4) HGC_FATHER&lt; 0.5, 15,  (20.43773, 14.3085200, 7.333401, 11.883230)*
#&gt;      5) HGC_FATHER&gt;=0.5, 227,  (21.07846,  5.0546260, 8.999053,  7.897551)*
#&gt;    3) WHITE&gt;=0.5, 258,  (21.85539,  2.5799100, 5.519510,  6.588677) 
#&gt;      6) SEX&lt; 1.5, 137,  (22.73525,  3.3813550, 5.517115,  7.342290) 
#&gt;       12) HGC_MOTHER&lt; 13.5, 108,  (22.91297,  4.0432710, 5.609483,  7.528207)*
#&gt;       13) HGC_MOTHER&gt;=13.5, 29,  (22.07340,  0.9162879, 5.173127,  6.649911)*
#&gt;      7) SEX&gt;=1.5, 121,  (20.85918,  1.6724900, 5.522222,  5.735412) 
#&gt;       14) HGC_MOTHER&lt; 14.5, 106,  (21.09507,  1.5462340, 6.043849,  5.757517) 
#&gt;         28) HGC_FATHER&lt; 15.5, 92,  (21.10598,  1.0854990, 5.628914,  5.910522) 
#&gt;           56) HGC_MOTHER&lt; 11.5, 30,  (21.75568,  1.6616190, 6.913787,  6.584619)*
#&gt;           57) HGC_MOTHER&gt;=11.5, 62,  (20.79161,  0.8067319, 5.007201,  5.584346)*
#&gt;         29) HGC_FATHER&gt;=15.5, 14,  (21.02338,  4.5739200, 8.770563,  4.752059)*
#&gt;       15) HGC_MOTHER&gt;=14.5, 15,  (19.19220,  2.5646940, 1.836060,  5.579204)*</div><div class='input'><span class='fu'><a href='stPlot.html'>stPlot</a></span>(<span class='no'>tree1</span>)</div><div class='img'><img src='splineTree-1.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Anna Neufeld, Brianna Heggeseth.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

