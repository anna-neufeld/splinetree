<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Build a spline random forest. — splineForest • splinetree</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Build a spline random forest. — splineForest" />

<meta property="og:description" content="Builds an ensemble of regression trees for longitudinal or functional data using the spline projection method. The resulting model
contains a list of spline trees along with some additional information. All parameters are used in the same way that they are used in
the splineTree() function. The additional parameter ntree specifies how many trees should be in the ensemble, and prob controls the
probability of selecting a given variable for split consideration at a node. This method may take several minutes to run- saving the forest after
building it is recommended." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">splinetree</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Forest-Intro.html">Forest Building with splinetree</a>
    </li>
    <li>
      <a href="../articles/Long-Intro.html">Introduction to splinetree</a>
    </li>
    <li>
      <a href="../articles/Tree-Intro.html">Tree Building with splinetree</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/anna-neufeld/splinetree">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Build a spline random forest.</h1>
    <small class="dont-index">Source: <a href='https://github.com/anna-neufeld/splinetree/blob/master/R/splineForest.R'><code>R/splineForest.R</code></a></small>
    <div class="hidden name"><code>splineForest.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Builds an ensemble of regression trees for longitudinal or functional data using the spline projection method. The resulting model
contains a list of spline trees along with some additional information. All parameters are used in the same way that they are used in
the splineTree() function. The additional parameter ntree specifies how many trees should be in the ensemble, and prob controls the
probability of selecting a given variable for split consideration at a node. This method may take several minutes to run- saving the forest after
building it is recommended.</p>
    
    </div>

    <pre class="usage"><span class='fu'>splineForest</span>(<span class='no'>splitFormula</span>, <span class='no'>tformula</span>, <span class='no'>idvar</span>, <span class='no'>data</span>, <span class='kw'>knots</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>df</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>degree</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>intercept</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>nGrid</span> <span class='kw'>=</span> <span class='fl'>7</span>,
  <span class='kw'>gridPoints</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>ntree</span> <span class='kw'>=</span> <span class='fl'>50</span>, <span class='kw'>prob</span> <span class='kw'>=</span> <span class='fl'>0.3</span>, <span class='kw'>cp</span> <span class='kw'>=</span> <span class='fl'>0.001</span>,
  <span class='kw'>minNodeSize</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>bootstrap</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>splitFormula</th>
      <td><p>Formula specifying the longitudinal response variable and the time-constant variables that will be used for splitting in the tree.</p></td>
    </tr>
    <tr>
      <th>tformula</th>
      <td><p>Formula specifying the longitudinal response variable and the variable that acts as the time variable.</p></td>
    </tr>
    <tr>
      <th>idvar</th>
      <td><p>The name of the variable that serves as the ID variable for grouping observations. Must be in quotes</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>dataframe that contains all variables specified in the formulas- in long format.</p></td>
    </tr>
    <tr>
      <th>knots</th>
      <td><p>Specified locations for internal knots in the spline basis. Defaults to NULL, which corresponds to no internal knots.</p></td>
    </tr>
    <tr>
      <th>df</th>
      <td><p>Degrees of freedom of the spline basis. If this is specified but the knots parameter is NULL, then the appropriate number of internal knots
will be added at quantiles of the training data. If both df and knots are unspecified, the spline basis will have no internal knots.</p></td>
    </tr>
    <tr>
      <th>degree</th>
      <td><p>Specifies degree of spline basis used in the tree.</p></td>
    </tr>
    <tr>
      <th>intercept</th>
      <td><p>Specifies whether or not the splitting process will consider the intercept coefficient of the spline projections.
Defaults to FALSE, which means that the tree will split based on trajectory shape, ignoring response level.</p></td>
    </tr>
    <tr>
      <th>nGrid</th>
      <td><p>Number of grid points to evaluate projection sum of squares at. If gridPoints is not supplied, then this is the
number of grid points that will be automatically placed at quantiles of the time variable. The default is 7.</p></td>
    </tr>
    <tr>
      <th>gridPoints</th>
      <td><p>Optional. A vector of numbers that will be used as the grid on which to evaluate the projection
sum of squares. Should fall roughly within the range of the time variable.</p></td>
    </tr>
    <tr>
      <th>ntree</th>
      <td><p>Number of trees in the forest.</p></td>
    </tr>
    <tr>
      <th>prob</th>
      <td><p>Probability of selecting a variable to included as a candidate for each split.</p></td>
    </tr>
    <tr>
      <th>cp</th>
      <td><p>Complexity parameter passed to the rpart building process. Default is the rpart default of 0.01</p></td>
    </tr>
    <tr>
      <th>minNodeSize</th>
      <td><p>Minimum number of observational units that can be in a terminal node. Controls tree size and helps avoid overfitting.
Default is 10.</p></td>
    </tr>
    <tr>
      <th>bootstrap</th>
      <td><p>Boolean specifying whether bootstrap sampling should be used when choosing data to
use for each tree. When set to FALSE (the default), sampling without replacement is used and 63.5<!-- % of the data -->
is used for each tree. When set to TRUE, a bootstrap sample is used for each tree.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A spline forest model, which is a named list with 15 components.
The list stores a list of trees (in model$Trees), along with information about the
spline basis used (model$intercept, model$innerKnots, model$boundaryKnots, etc.), and information about which datapoints were
used to build each tree (model$oob_indices and model$index). Note that each element in model$Trees is an rpart object but
it is not the same as a model returned from splineTree() because it does not store all relevant information in model$parms.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The ensemble method is highly similar to the random forest methodology of Breiman (2001). Each tree in the ensemble is fit to a random sample
of 63.5<!-- % of the data (sampled without replacement). At each node of each tree, only a subset of the split variables are considered candidates for the split. In our methodology, -->
the subset of variables considered at each node is determined by a random process. The prob parameter specifies the probability that a given variable
will be selected at a certain node. Because the method is based on probability, the same number of variables are not considered for splitting at each node
(as in the randomForest package). Note that if prob is small and the number of variables in the splitFormula is also small, there is a high probability that
no variables will be considered for splitting at a certain node, which is problematic. The fewer total variables there are, the larger prob should be to
ensure good results.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>nlsySubset</span> <span class='kw'>&lt;-</span> <span class='no'>nlsySample</span>[<span class='no'>nlsySample</span>$<span class='no'>ID</span> <span class='kw'>%in%</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sample'>sample</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/unique'>unique</a></span>(<span class='no'>nlsySample</span>$<span class='no'>ID</span>), <span class='fl'>400</span>),]
<span class='no'>splitForm</span> <span class='kw'>&lt;-</span>~<span class='no'>HISP</span>+<span class='no'>WHITE</span>+<span class='no'>BLACK</span>+<span class='no'>HGC_MOTHER</span>+<span class='no'>HGC_FATHER</span>+<span class='no'>SEX</span>+<span class='no'>Num_sibs</span>
<span class='no'>sampleForest</span> <span class='kw'>&lt;-</span> <span class='fu'>splineForest</span>(<span class='no'>splitForm</span>, <span class='no'>BMI</span>~<span class='no'>AGE</span>, <span class='st'>'ID'</span>, <span class='no'>nlsySubset</span>, <span class='kw'>degree</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>cp</span><span class='kw'>=</span><span class='fl'>0.005</span>, <span class='kw'>ntree</span><span class='kw'>=</span><span class='fl'>10</span>)</div><div class='output co'>#&gt; [1] "Building Tree:"
#&gt; [1] 1
#&gt; [1] 2
#&gt; [1] 3
#&gt; [1] 4
#&gt; [1] 5
#&gt; [1] 6
#&gt; [1] 7
#&gt; [1] 8
#&gt; [1] 9
#&gt; [1] 10</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Anna Neufeld, Brianna Heggeseth.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

